
# <p align = "middle">**架构设计说明文档**</p>

# 1 C-S架构
## 1.1 概述

> `Client`/`Server` (`客户机`/`服务器`) 结构，是大家熟知的软件系统体系结构，通过将任务合理分配到Client端和Server端，降低了系统的通讯开销，需要安装客户端才可进行管理操作。<br>
> 客户端和服务器端的程序不同，用户的程序主要在`客户端`，`服务器端`主要提供数据管理、数据共享、数据及系统维护和并发控制等，客户端程序主要完成用户的具体的业务。

## 1.2 选用理由
> - 任务合理分配到Client端和Server端来实现，降低了系统的通讯开销。
> - 应用不同的模块共享逻辑组件;因此，内部的和外部的用户都可以访问新的和现有的应用系统，通过现有应用系统中的逻辑可以扩展出新的应用系统。

## 1.3 架构应用
> 在服务器（118.89.20.188：3000）部署服务端，在`docker`中部署数据库。将应用作为客户端，客户端程序通过`API`接口与服务器端进行交互。

# 2 前端：
## 2.1 概述

安卓端这边主要采用了 `EventBus` 作为事件通知总栈，在结构层次上体现为：

```
/app
    /event
    /helpers
    /model
    /net
    /ui
        /activities
        /fragments
        /...
```

设计上安卓端分为三层：ViewModel层、网络层和视图层。ViewModel维护数据模型实体，网络层负责服务端数据获取/发送，视图层负责界面渲染。

## 2.2 选用理由

### 更进一步的解耦

消息总线方式发送者只需要发送一个消息，根本不用关心是否有人订阅这个消息，这样发送者根本不需要了解其他组件的情况，和其他组件的耦合也就越少。

### 多对多的通信

基于接口的方式只能进行一对一的调用，基于消息总线的方式能够提供多对多的通信。

## 2.3 架构应用

UI Activity主流程包括以下内容：

- 在初始化生命周期中通过网络层拉去远程数据；
- 在接收网络数据之后实例化 ViewModel 层，产生数据实体；
- 界面使用 ViewModel 层维护的数据进行渲染；同时用户通过UI操作与 ViewModel 实例进行交互，包括更新模型数据等；同时，ViewModel 层还可以将数据变更通过与网络层交互，同步到远程服务器上。

# 3 后端：
## 3.1 概述

后端采用 javascript express 框架， Mysql 关系型数据库， MVC 设计模式

## 3.2 选用理由

### 快速开发

express 只需编写 router controller model

### 易维护

MVC 设计模式，model 与 controller 分离，易维护

### 避免数据冗余以及数据易读

关系型数据库可避免数据冗余，以及使用 sql 语句可使数据库读取更容易

## 3.3 架构应用

- 监听端口，获取 http 请求
- url 处理，分发到相应 router
- 调用 controller，后调用 model 与数据库进行交流
- 返回数据

----------------------------------------